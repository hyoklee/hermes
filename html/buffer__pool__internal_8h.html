<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.17"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Hermes: /home/runner/work/hermes/hermes/src/buffer_pool_internal.h File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Hermes
   &#160;<span id="projectnumber">0.3.0-beta</span>
   </div>
   <div id="projectbrief">I/O Buffering System</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('buffer__pool__internal_8h.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a>  </div>
  <div class="headertitle">
<div class="title">buffer_pool_internal.h File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &quot;<a class="el" href="buffer__pool_8h_source.html">buffer_pool.h</a>&quot;</code><br />
<code>#include &quot;<a class="el" href="memory__management_8h_source.html">memory_management.h</a>&quot;</code><br />
</div><div class="textblock"><div class="dynheader">
Include dependency graph for buffer_pool_internal.h:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool__internal_8h__incl.png" border="0" usemap="#_2home_2runner_2work_2hermes_2hermes_2src_2buffer__pool__internal_8h" alt=""/></div>
</div>
</div><div class="textblock"><div class="dynheader">
This graph shows which files directly or indirectly include this file:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool__internal_8h__dep__incl.png" border="0" usemap="#_2home_2runner_2work_2hermes_2hermes_2src_2buffer__pool__internal_8hdep" alt=""/></div>
</div>
</div>
<p><a href="buffer__pool__internal_8h_source.html">Go to the source code of this file.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:aef32dcdc8a11c0cd0a2bed9b39e831e0"><td class="memItemLeft" align="right" valign="top">ptrdiff_t&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__pool_8cc.html#aef32dcdc8a11c0cd0a2bed9b39e831e0">hermes::InitBufferPool</a> (u8 *shmem_base, Arena *buffer_pool_arena, Arena *scratch_arena, i32 node_id, Config *config)</td></tr>
<tr class="separator:aef32dcdc8a11c0cd0a2bed9b39e831e0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a16d19dbc6aa057e14961538cd3d933"><td class="memItemLeft" align="right" valign="top">BufferPool *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__pool_8cc.html#a3a16d19dbc6aa057e14961538cd3d933">hermes::GetBufferPoolFromContext</a> (SharedMemoryContext *context)</td></tr>
<tr class="separator:a3a16d19dbc6aa057e14961538cd3d933"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e0bec74072dacfc57b528846445e446"><td class="memItemLeft" align="right" valign="top">Device *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__pool_8cc.html#a8e0bec74072dacfc57b528846445e446">hermes::GetDeviceById</a> (SharedMemoryContext *context, DeviceID device_id)</td></tr>
<tr class="separator:a8e0bec74072dacfc57b528846445e446"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a18efa1b5dc4adcceb04cda71e1e9294d"><td class="memItemLeft" align="right" valign="top">BufferHeader *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__pool_8cc.html#a18efa1b5dc4adcceb04cda71e1e9294d">hermes::GetHeadersBase</a> (SharedMemoryContext *context)</td></tr>
<tr class="separator:a18efa1b5dc4adcceb04cda71e1e9294d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a42d7d04421227f822bdaa0344654409f"><td class="memItemLeft" align="right" valign="top">BufferHeader *&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__pool_8cc.html#a42d7d04421227f822bdaa0344654409f">hermes::GetHeaderByBufferId</a> (SharedMemoryContext *context, BufferID id)</td></tr>
<tr class="separator:a42d7d04421227f822bdaa0344654409f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a53535e85665e48b4cf17e78a790537da"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__pool_8cc.html#a53535e85665e48b4cf17e78a790537da">hermes::HeaderIsDormant</a> (BufferHeader *header)</td></tr>
<tr class="separator:a53535e85665e48b4cf17e78a790537da"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aa4aa1c5e87928e65cc3e16c8a2c1aa6e"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__pool_8cc.html#aa4aa1c5e87928e65cc3e16c8a2c1aa6e">hermes::SplitRamBufferFreeList</a> (SharedMemoryContext *context, int slab_index)</td></tr>
<tr class="separator:aa4aa1c5e87928e65cc3e16c8a2c1aa6e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0594eaad6f55d0838ac754ce0aa8e53c"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="buffer__pool_8cc.html#a0594eaad6f55d0838ac754ce0aa8e53c">hermes::MergeRamBufferFreeList</a> (SharedMemoryContext *context, int slab_index)</td></tr>
<tr class="separator:a0594eaad6f55d0838ac754ce0aa8e53c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a8e863f2d0dd987260101f7608395f743"><td class="memItemLeft" align="right" valign="top"><a id="a8e863f2d0dd987260101f7608395f743"></a>
BufferID&#160;</td><td class="memItemRight" valign="bottom"><b>hermes::PeekFirstFreeBufferId</b> (SharedMemoryContext *context, DeviceID device_id, int slab_index)</td></tr>
<tr class="separator:a8e863f2d0dd987260101f7608395f743"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae2379ef671e0ec1732b5deb50c412e8e"><td class="memItemLeft" align="right" valign="top"><a id="ae2379ef671e0ec1732b5deb50c412e8e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>hermes::LocalReleaseBuffer</b> (SharedMemoryContext *context, BufferID buffer_id)</td></tr>
<tr class="separator:ae2379ef671e0ec1732b5deb50c412e8e"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9d9f005212f0ee04c52edbca60eca248"><td class="memItemLeft" align="right" valign="top"><a id="a9d9f005212f0ee04c52edbca60eca248"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>hermes::LocalReleaseBuffers</b> (SharedMemoryContext *context, const std::vector&lt; BufferID &gt; &amp;buffer_ids)</td></tr>
<tr class="separator:a9d9f005212f0ee04c52edbca60eca248"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6dcc99fcd618239cda581675a529849b"><td class="memItemLeft" align="right" valign="top"><a id="a6dcc99fcd618239cda581675a529849b"></a>
i32&#160;</td><td class="memItemRight" valign="bottom"><b>hermes::GetSlabUnitSize</b> (SharedMemoryContext *context, DeviceID device_id, int slab_index)</td></tr>
<tr class="separator:a6dcc99fcd618239cda581675a529849b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af280c93959e8da60259bc08f4688093b"><td class="memItemLeft" align="right" valign="top"><a id="af280c93959e8da60259bc08f4688093b"></a>
u32&#160;</td><td class="memItemRight" valign="bottom"><b>hermes::LocalGetBufferSize</b> (SharedMemoryContext *context, BufferID id)</td></tr>
<tr class="separator:af280c93959e8da60259bc08f4688093b"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3e0a2a64ef4975e84ff6b4a5d486c7c0"><td class="memItemLeft" align="right" valign="top"><a id="a3e0a2a64ef4975e84ff6b4a5d486c7c0"></a>
i32&#160;</td><td class="memItemRight" valign="bottom"><b>hermes::GetSlabBufferSize</b> (SharedMemoryContext *context, DeviceID device_id, int slab_index)</td></tr>
<tr class="separator:a3e0a2a64ef4975e84ff6b4a5d486c7c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a593a42c0609d3e03c087939a343de862"><td class="memItemLeft" align="right" valign="top"><a id="a593a42c0609d3e03c087939a343de862"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>hermes::SerializeBufferPoolToFile</b> (SharedMemoryContext *context, FILE *file)</td></tr>
<tr class="separator:a593a42c0609d3e03c087939a343de862"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:acf9e2fb4a765e317b23e94ff4263e82a"><td class="memItemLeft" align="right" valign="top"><a id="acf9e2fb4a765e317b23e94ff4263e82a"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>hermes::ParseConfig</b> (Arena *arena, const char *path, Config *config)</td></tr>
<tr class="separator:acf9e2fb4a765e317b23e94ff4263e82a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aabdc35244dad082f8db85b19fd30844d"><td class="memItemLeft" align="right" valign="top"><a id="aabdc35244dad082f8db85b19fd30844d"></a>
u8 *&#160;</td><td class="memItemRight" valign="bottom"><b>hermes::InitSharedMemory</b> (const char *shmem_name, size_t total_size)</td></tr>
<tr class="separator:aabdc35244dad082f8db85b19fd30844d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3ba1cf80bc2aeb351995712d75a9c991"><td class="memItemLeft" align="right" valign="top"><a id="a3ba1cf80bc2aeb351995712d75a9c991"></a>
u8 *&#160;</td><td class="memItemRight" valign="bottom"><b>hermes::GetRamBufferPtr</b> (SharedMemoryContext *context, BufferID buffer_id)</td></tr>
<tr class="separator:a3ba1cf80bc2aeb351995712d75a9c991"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a4bf530515bc3cd2828d28b763a701c8c"><td class="memItemLeft" align="right" valign="top"><a id="a4bf530515bc3cd2828d28b763a701c8c"></a>
Target *&#160;</td><td class="memItemRight" valign="bottom"><b>hermes::GetTarget</b> (SharedMemoryContext *context, int index)</td></tr>
<tr class="separator:a4bf530515bc3cd2828d28b763a701c8c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a1cc729a7f44a6c52a38a2ab81ca2f13a"><td class="memItemLeft" align="right" valign="top"><a id="a1cc729a7f44a6c52a38a2ab81ca2f13a"></a>
Target *&#160;</td><td class="memItemRight" valign="bottom"><b>hermes::GetTargetFromId</b> (SharedMemoryContext *context, TargetID id)</td></tr>
<tr class="separator:a1cc729a7f44a6c52a38a2ab81ca2f13a"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:af129df5dabe8a9df00ea78d0e47fa35c"><td class="memItemLeft" align="right" valign="top"><a id="af129df5dabe8a9df00ea78d0e47fa35c"></a>
std::atomic&lt; u32 &gt; *&#160;</td><td class="memItemRight" valign="bottom"><b>hermes::GetAvailableBuffersArray</b> (SharedMemoryContext *context, DeviceID device_id)</td></tr>
<tr class="separator:af129df5dabe8a9df00ea78d0e47fa35c"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This file contains the developer interface to the BufferPool. It describes the API available to direct consumers of the BufferPool which include buffer pool tests, the buffer pool visualizer, and the BufferPool itself. For the "public" API, see <a class="el" href="buffer__pool_8h.html">buffer_pool.h</a>. </p>
</div><h2 class="groupheader">Function Documentation</h2>
<a id="a3a16d19dbc6aa057e14961538cd3d933"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a3a16d19dbc6aa057e14961538cd3d933">&#9670;&nbsp;</a></span>GetBufferPoolFromContext()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BufferPool * hermes::GetBufferPoolFromContext </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhermes_1_1_shared_memory_context.html">SharedMemoryContext</a> *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Obtains a pointer to the BufferPool constructed in shared memory.</p>
<p>Since the BufferPool lives in shared memory, this pointer should never be freed. It is only destroyed when the Hermes core closes the shared memory.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The shared memory context for accessing the BufferPool.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the BufferPool constructed in the shared memory represented by <code>context</code>. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_a3a16d19dbc6aa057e14961538cd3d933_cgraph.png" border="0" usemap="#buffer__pool_8cc_a3a16d19dbc6aa057e14961538cd3d933_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_a3a16d19dbc6aa057e14961538cd3d933_icgraph.png" border="0" usemap="#buffer__pool_8cc_a3a16d19dbc6aa057e14961538cd3d933_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a8e0bec74072dacfc57b528846445e446"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a8e0bec74072dacfc57b528846445e446">&#9670;&nbsp;</a></span>GetDeviceById()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">Device * hermes::GetDeviceById </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhermes_1_1_shared_memory_context.html">SharedMemoryContext</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">DeviceID&#160;</td>
          <td class="paramname"><em>device_id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a pointer to the Device with index device_id in the shared memory context.</p>
<p>This pointer should never be freed, since it lives in shared memory and is managed by the Hermes core.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The shared memory context where the Devices are stored. </td></tr>
    <tr><td class="paramname">device_id</td><td>An identifier for the desired Device. This is an index into an array of Devices.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the Device with ID device_id. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_a8e0bec74072dacfc57b528846445e446_cgraph.png" border="0" usemap="#buffer__pool_8cc_a8e0bec74072dacfc57b528846445e446_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_a8e0bec74072dacfc57b528846445e446_icgraph.png" border="0" usemap="#buffer__pool_8cc_a8e0bec74072dacfc57b528846445e446_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a42d7d04421227f822bdaa0344654409f"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a42d7d04421227f822bdaa0344654409f">&#9670;&nbsp;</a></span>GetHeaderByBufferId()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BufferHeader * hermes::GetHeaderByBufferId </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhermes_1_1_shared_memory_context.html">SharedMemoryContext</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="unionhermes_1_1_buffer_i_d.html">BufferID</a>&#160;</td>
          <td class="paramname"><em>id</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Retrieves the BufferHeader that corresponds to BufferID <code>id</code>.</p>
<p>This pointer should never be freed. The BufferHeaders are managed by the Hermes core.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The shared memory context for accessing the BufferHeaders. </td></tr>
    <tr><td class="paramname">id</td><td>The desired BufferID to retrieve.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the BufferHeader that corresponds to <code>id</code>. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_a42d7d04421227f822bdaa0344654409f_cgraph.png" border="0" usemap="#buffer__pool_8cc_a42d7d04421227f822bdaa0344654409f_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_a42d7d04421227f822bdaa0344654409f_icgraph.png" border="0" usemap="#buffer__pool_8cc_a42d7d04421227f822bdaa0344654409f_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a18efa1b5dc4adcceb04cda71e1e9294d"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a18efa1b5dc4adcceb04cda71e1e9294d">&#9670;&nbsp;</a></span>GetHeadersBase()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">BufferHeader * hermes::GetHeadersBase </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhermes_1_1_shared_memory_context.html">SharedMemoryContext</a> *&#160;</td>
          <td class="paramname"><em>context</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns a pointer to the first BufferHeader in the array of BufferHeaders constructed in the shared memory context.</p>
<p>This pointer should never be freed, as it is managed by the Hermes core. Indexing off this pointer, one can easily iterate through all BufferHeaders. When retrieving a specific header, use GetHeaderByBufferId.</p>
<p>Example: </p><div class="fragment"><div class="line">BufferHeader *headers = <a class="code" href="buffer__pool_8cc.html#a18efa1b5dc4adcceb04cda71e1e9294d">GetHeadersBase</a>(context);</div>
<div class="line"><span class="keywordflow">for</span> (u32 i = 0; i &lt; pool-&gt;num_headers[device_id]; ++i) {</div>
<div class="line">  BufferHeader *header = headers + i;</div>
<div class="line">  <span class="comment">// ...</span></div>
<div class="line">}</div>
</div><!-- fragment --><dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The shared memory context where the BufferHeaders live.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>A pointer to the first BufferHeader in the array of BufferHeaders. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_a18efa1b5dc4adcceb04cda71e1e9294d_cgraph.png" border="0" usemap="#buffer__pool_8cc_a18efa1b5dc4adcceb04cda71e1e9294d_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_a18efa1b5dc4adcceb04cda71e1e9294d_icgraph.png" border="0" usemap="#buffer__pool_8cc_a18efa1b5dc4adcceb04cda71e1e9294d_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a53535e85665e48b4cf17e78a790537da"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a53535e85665e48b4cf17e78a790537da">&#9670;&nbsp;</a></span>HeaderIsDormant()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool hermes::HeaderIsDormant </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhermes_1_1_buffer_header.html">BufferHeader</a> *&#160;</td>
          <td class="paramname"><em>header</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns whether or not <code>header</code> is currently backed by physical storage.</p>
<p>A dormant header has no storage associated with it. It exists to facilitate the splitting and merging mechanisms. Splitting buffers into smaller buffers requires more headers. When that happens, dormant headers become associated with backing storage, and become "live."</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">header</td><td>The header to check.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>true if <code>header</code> is not backed by physical storage, false otherwise. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_a53535e85665e48b4cf17e78a790537da_cgraph.png" border="0" usemap="#buffer__pool_8cc_a53535e85665e48b4cf17e78a790537da_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_a53535e85665e48b4cf17e78a790537da_icgraph.png" border="0" usemap="#buffer__pool_8cc_a53535e85665e48b4cf17e78a790537da_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="aef32dcdc8a11c0cd0a2bed9b39e831e0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aef32dcdc8a11c0cd0a2bed9b39e831e0">&#9670;&nbsp;</a></span>InitBufferPool()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">ptrdiff_t hermes::InitBufferPool </td>
          <td>(</td>
          <td class="paramtype">u8 *&#160;</td>
          <td class="paramname"><em>hermes_memory</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhermes_1_1_arena.html">Arena</a> *&#160;</td>
          <td class="paramname"><em>buffer_pool_arena</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhermes_1_1_arena.html">Arena</a> *&#160;</td>
          <td class="paramname"><em>scratch_arena</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">i32&#160;</td>
          <td class="paramname"><em>node_id</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype"><a class="el" href="structhermes_1_1_config.html">Config</a> *&#160;</td>
          <td class="paramname"><em>config</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Initializes a BufferPool inside an existing shared memory segment.</p>
<p>Divides the shared memory segment pointed to by hermes_memory into 1) An array of RAM buffers. 2) An array of BufferHeaders. 3) An array of Devices. 4) The BufferPool struct, which contains pointers (really offsets) to the data above.</p>
<p>The sizes of each of these sections is controlled by the config parameter. Each BufferHeader is initialized to point to a specfic offset. In the case of a RAM buffer, this offset is from the beginning of the shared memory. In the case of a file buffer, the offset is from the beginning of a file. Free lists for each slab in each Device are also constructed.</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">hermes_memory</td><td>The base pointer to a shared memory segment. </td></tr>
    <tr><td class="paramname">buffer_pool_arena</td><td>An Arena backed by the shared memory segment pointed to by hermes_shared_memory. </td></tr>
    <tr><td class="paramname">scratch_arena</td><td>An arena for temporary allocations that are destroyed when this function exits. </td></tr>
    <tr><td class="paramname">node_id</td><td>The identifier of the node this function is running on. </td></tr>
    <tr><td class="paramname">config</td><td>Configuration that specifies how the BufferPool is constructed.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>Returns</dt><dd>The offset of the beginning of the BufferPool from the beginning of shared memory. </dd></dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_aef32dcdc8a11c0cd0a2bed9b39e831e0_cgraph.png" border="0" usemap="#buffer__pool_8cc_aef32dcdc8a11c0cd0a2bed9b39e831e0_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_aef32dcdc8a11c0cd0a2bed9b39e831e0_icgraph.png" border="0" usemap="#buffer__pool_8cc_aef32dcdc8a11c0cd0a2bed9b39e831e0_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="a0594eaad6f55d0838ac754ce0aa8e53c"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a0594eaad6f55d0838ac754ce0aa8e53c">&#9670;&nbsp;</a></span>MergeRamBufferFreeList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hermes::MergeRamBufferFreeList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhermes_1_1_shared_memory_context.html">SharedMemoryContext</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slab_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TODO(chogan):</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The shared memory context for accessing the BufferPool </td></tr>
    <tr><td class="paramname">slab_index</td><td>The 0-based index of the slab to merge. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_a0594eaad6f55d0838ac754ce0aa8e53c_cgraph.png" border="0" usemap="#buffer__pool_8cc_a0594eaad6f55d0838ac754ce0aa8e53c_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_a0594eaad6f55d0838ac754ce0aa8e53c_icgraph.png" border="0" usemap="#buffer__pool_8cc_a0594eaad6f55d0838ac754ce0aa8e53c_icgraph" alt=""/></div>
</div>

</div>
</div>
<a id="aa4aa1c5e87928e65cc3e16c8a2c1aa6e"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa4aa1c5e87928e65cc3e16c8a2c1aa6e">&#9670;&nbsp;</a></span>SplitRamBufferFreeList()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void hermes::SplitRamBufferFreeList </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="structhermes_1_1_shared_memory_context.html">SharedMemoryContext</a> *&#160;</td>
          <td class="paramname"><em>context</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">int&#160;</td>
          <td class="paramname"><em>slab_index</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>TODO(chogan):</p>
<dl class="params"><dt>Parameters</dt><dd>
  <table class="params">
    <tr><td class="paramname">context</td><td>The shared memory context for accessing the BufferPool. </td></tr>
    <tr><td class="paramname">slab_index</td><td>The 0-based index of the slab to split. </td></tr>
  </table>
  </dd>
</dl>
<div class="dynheader">
Here is the call graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_aa4aa1c5e87928e65cc3e16c8a2c1aa6e_cgraph.png" border="0" usemap="#buffer__pool_8cc_aa4aa1c5e87928e65cc3e16c8a2c1aa6e_cgraph" alt=""/></div>
</div>
<div class="dynheader">
Here is the caller graph for this function:</div>
<div class="dyncontent">
<div class="center"><img src="buffer__pool_8cc_aa4aa1c5e87928e65cc3e16c8a2c1aa6e_icgraph.png" border="0" usemap="#buffer__pool_8cc_aa4aa1c5e87928e65cc3e16c8a2c1aa6e_icgraph" alt=""/></div>
</div>

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<div class="ttc" id="abuffer__pool_8cc_html_a18efa1b5dc4adcceb04cda71e1e9294d"><div class="ttname"><a href="buffer__pool_8cc.html#a18efa1b5dc4adcceb04cda71e1e9294d">hermes::GetHeadersBase</a></div><div class="ttdeci">BufferHeader * GetHeadersBase(SharedMemoryContext *context)</div><div class="ttdef"><b>Definition:</b> buffer_pool.cc:189</div></div>
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><a class="el" href="buffer__pool__internal_8h.html">buffer_pool_internal.h</a></li>
    <li class="footer">Generated by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17 </li>
  </ul>
</div>
</body>
</html>
